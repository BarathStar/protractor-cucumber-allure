<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Protractor-Cucumber-Allure by igniteram</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Protractor-Cucumber-Allure</h1>
        <p>e2e kickstarter framework for using protractorJS with cucumberJS and allure jenkins CI reports</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/igniteram/protractor-cucumber-allure" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/igniteram/protractor-cucumber-allure/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/igniteram/protractor-cucumber-allure/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h3>
<a id="protractor-cucumber-allure-setup-guide" class="anchor" href="#protractor-cucumber-allure-setup-guide" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Protractor-Cucumber-Allure Setup Guide</h3>

<p>This project demonstrates the basic protractor-cucumber framework project setup with Jenkins CI and Allure Reports integration</p>

<h3>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h3>

<ul>
<li>Crisp &amp; Clear folder structures</li>
<li>Page Object design pattern implementation</li>
<li>DirectConnect capability for Chrome &amp; Firefox browsers</li>
<li>Extensive hooks implemented for BeforeFeature, AfterFeature, AfterScenarios etc.</li>
<li>Screenshots on failure feature scenarios</li>
<li>PosgreSQL database connection feature example</li>
<li>Support for cucumber-html-reports</li>
<li>Support for CI and Cucumber-Allure-Jenkins reports</li>
</ul>

<h3>
<a id="to-get-started" class="anchor" href="#to-get-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>To Get Started</h3>

<h4>
<a id="pre-requisites" class="anchor" href="#pre-requisites" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pre-requisites</h4>

<p>1.NodeJS installed globally in the system.</p>

<p>2.Chrome or Firefox browsers installed.</p>

<p>3.Text Editor(Optional) installed--&gt;Sublime/Visual Studio Code.</p>

<h4>
<a id="run-scripts" class="anchor" href="#run-scripts" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Run Scripts</h4>

<ul>
<li>Clone the repository into a folder</li>
<li>
<p>Go inside the folder and run following command from terminal/command prompt</p>

<blockquote>
<p>npm install </p>
</blockquote>
</li>
<li><p>All the dependencies from package.json would be installed in node_modules folder.</p></li>
<li>
<p>Following command will launch the browser and run the scripts</p>

<blockquote>
<p>npm test</p>
</blockquote>
</li>
</ul>

<h4>
<a id="writing-features" class="anchor" href="#writing-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Writing Features</h4>

<blockquote>
<pre><code>Feature: To search allure reports in google
  @AllureScenario
  Scenario: Allure Reports Google
    Given I am on google page
    When I type "allure reports"
    Then I click search button
    Then I clear search textbox
</code></pre>
</blockquote>

<h4>
<a id="writing-step-definitions" class="anchor" href="#writing-step-definitions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Writing Step Definitions</h4>

<blockquote>
<pre><code>var homePage = function () {
 'use strict';
var search = new searchPage(); 
this.Given(/^I am on google page$/, function () {
 return expect(search.title()).to.eventually.equal('Google');
   });
 };
</code></pre>
</blockquote>

<h4>
<a id="writing-page-objects" class="anchor" href="#writing-page-objects" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Writing Page Objects</h4>

<blockquote>
<pre><code>var googleSearch = function () {
"use strict";
this.title = function () {
return browser.driver.getTitle();
}; 
this.searchTextBox= function (text) {
    $("input[name='q']").sendKeys(text);
};
this.searchButton = $("button[name='btnG']");
this.clearText= function () {
    $("input[name='q']").clear();
};
};
</code></pre>
</blockquote>

<h4>
<a id="cucumber-hooks" class="anchor" href="#cucumber-hooks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cucumber Hooks</h4>

<p>Following method takes screenshot on failure of each scenario</p>

<blockquote>
<pre><code> this.After(function(scenario, callback) {
   if (scenario.isFailed()) {
   browser.takeScreenshot().then(function(base64png) {
   var decodedImage = new Buffer(base64png, 'base64').toString('binary');
   scenario.attach(decodedImage, 'image/png');
   callback();
   }, function(err) {
   callback(err);
   });
   } else {
   callback();
   }
   });
</code></pre>
</blockquote>

<h4>
<a id="cucumberopts-tags" class="anchor" href="#cucumberopts-tags" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CucumberOpts Tags</h4>

<p>Following configuration shows to call specific tags from feature files</p>

<blockquote>
<pre><code>cucumberOpts: {
monochrome: true,
strict: true,
plugin: ["pretty"],
require: ['../StepDefinitions/*.js', '../Support/*.js'],
tags: '@Regression,@ProtractorScenario,@AllureScenario'
}
</code></pre>
</blockquote>

<h4>
<a id="database-connection" class="anchor" href="#database-connection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Database Connection</h4>

<p>PostgreSQL nodejs module has been integrated with this framework, database feature file eloborates the connection and how the query results are retrieved.</p>

<blockquote>
<pre><code>var pg = require('pg');
var connectDB = function() {
var conString = "postgres://username:password@localhost:5432/database_name";
this.client = new pg.Client(conString);
this.client.connect(function(err){
if(err){
        return console.error('could not connect to postgres', err);
    }
});
};
</code></pre>
</blockquote>

<h4>
<a id="html-reports" class="anchor" href="#html-reports" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>HTML Reports</h4>

<p>Default cucumber HTML reports are generated which can be customized according to specific needs</p>

<p><img src="https://raw.githubusercontent.com/igniteram/protractor-cucumber-allure/master/Images/cucumberReport.png" alt="cucumberreportscreen"></p>

<h4>
<a id="allure-reports" class="anchor" href="#allure-reports" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Allure Reports</h4>

<p>The reporter.js file in Support folder generates the target directory "Reports" in which the xml files are generated.For detail instructions on how it works, please refer the Allure-CucumberJS official repo : <a href="https://github.com/allure-framework/cucumberjs-allure-reporter">https://github.com/allure-framework/cucumberjs-allure-reporter</a></p>

<p>How to setup Jenkins and Allure framework : <a href="http://wiki.qatools.ru/display/AL/Allure+Jenkins+Plugin">http://wiki.qatools.ru/display/AL/Allure+Jenkins+Plugin</a></p>

<blockquote>
<pre><code> var reporter = require('cucumberjs-allure-reporter');
 reporter.config(
 {
targetDir:'./Reports/'
 }
 );
 module.exports = reporter;
</code></pre>
</blockquote>

<p><img src="https://raw.githubusercontent.com/igniteram/protractor-cucumber-allure/master/Images/allureReport.png" alt="allurereportscreen">
<img src="https://raw.githubusercontent.com/igniteram/protractor-cucumber-allure/master/Images/allureReportGraph.png" alt="alluregraphscreen"></p>

<h2>
<a id="contributions" class="anchor" href="#contributions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributions</h2>

<p>For contributors who want to improve this repo by contributing some code, reporting bugs, issues or improving documentation - PR's are highly welcome, please maintain the coding style , folder structure , detailed description of documentation and bugs/issues with examples if possible.</p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/igniteram">igniteram</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
